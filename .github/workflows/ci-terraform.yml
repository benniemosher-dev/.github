name: Terraform CI

on:
  workflow_call:
    inputs:
      enable-lint:
        required: false
        type: boolean
        default: true
      enable-security:
        required: false
        type: boolean
        default: true
      enable-cost:
        required: false
        type: boolean
        default: true

jobs:
  lint-terraform:
    name: Lint Terraform
    uses: "benniemosher-dev/.github/.github/workflows/lint-terraform.yml@main"
    if: ${{ inputs.enable-lint == true }}

  security-terraform:
    name: Security Terraform
    uses: "benniemosher-dev/.github/.github/workflows/sec-terraform.yml@main"
    if: ${{ inputs.enable-security == true }}

  cost-terraform:
    name: Cost Terraform
    uses: "benniemosher-dev/.github/.github/workflows/cost-terraform.yml@main"
    if: ${{ inputs.enable-cost == true }}
    secrets:
      INFRACOST_API_KEY: ${{ secrets.INFRACOST_API_KEY }}
